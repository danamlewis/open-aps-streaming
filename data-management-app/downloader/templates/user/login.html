
{% extends "layout.html" %}
{% block content %}

<link href="{{ url_for('static', filename='css/' + 'login.css') }}" rel="stylesheet">


<div class="background-content">
    <img src="{{ url_for('static', filename='images/background/' + 'base_v4.jpg') }}" width="100%">
    <div class="message-box unselectable">
        <h4>Welcome to the OpenAPS data portal.</h4>
    </div>
    <form class="login-box" method="POST">

        <h4>Login</h4>

        <input type="email" name="login-email" placeholder="Email" autocomplete="off" spellcheck="false" required>

        <input type="password" name="login-password" id="password" placeholder="Password" required>

        <input type="submit" class="button" value="Sign In">

        <a href="#" class="reset-button">Reset Password</a><br>
        <a href="/conditions">Register</a>

    </form>
</div>


<script>

    $('.reset-button').on('click', function () {

        Swal.fire({
          title: 'Password Reset',
          input: 'email',
          inputPlaceholder: 'Enter your email address'
        }).then( function (result) {

            if ( result.value ) {

                var form = document.createElement('form');
                form.setAttribute('method', 'POST');

                var input = document.createElement('input');
                input.setAttribute('type', 'text');
                input.setAttribute('name', 'password-reset');
                input.setAttribute('value', result.value);

                form.append(input);
                document.body.appendChild(form);

                form.submit();

            };

        });

    });

</script>
<script>

    $(document).ready( function () {

        $('.message-box h4').fitText(1.2);
        $('.login-box h4').fitText(1.1);

    });

</script>

{% endblock content %}