
{% extends "layout.html" %}
{% block content %}

<script src="https://cdnjs.cloudflare.com/ajax/libs/iframe-resizer/4.1.1/iframeResizer.js"></script>

<link href="{{ url_for('static', filename='css/' + 'tabs.css') }}" rel="stylesheet">
<link href="{{ url_for('static', filename='css/' + 'analytics.css') }}" rel="stylesheet">


<div class="background-content" id="bckgrnd">

    <img src="{{ url_for('static', filename='images/background/' + 'base_v4.jpg') }}" width="100%">

    <div class="top-container">

        <div class="message-box unselectable">
            <div style="display: table; width: 100%;">
                <div class="page-title title-img">
                    <svg xmlns="http://www.w3.org/2000/svg" baseProfile="full" version="1.1" viewBox="0 0 60 56" class="service-images">
                        <rect id="backgroundrect" width="100%" height="100%" x="0" y="0" fill="none" stroke="none"/>
                        <g class="currentLayer" style="">
                            <path d="M56.99799999981001,55.99899999836087 C56.99799999981001,55.99899999836087 42.99899999981001,55.99899999836087 42.99899999981001,55.99899999836087 C42.99899999981001,55.99899999836087 28.99899999981001,55.99899999836087 28.99899999981001,55.99899999836087 C28.99899999981001,55.99899999836087 14.99999999981001,55.99899999836087 14.99999999981001,55.99899999836087 C14.99999999981001,55.99899999836087 0.9999999998100302,55.99899999836087 0.9999999998100302,55.99899999836087 C0.4479999998100102,55.99899999836087 -1.8996980464397462e-10,55.55099999836087 -1.8996980464397462e-10,54.99899999836087 C-1.8996980464397462e-10,54.99899999836087 -1.8996980464397462e-10,44.99899999836087 -1.8996980464397462e-10,44.99899999836087 C-1.8996980464397462e-10,43.34499999836087 1.3459999998100303,41.99899999836087 2.99999999981003,41.99899999836087 C2.99999999981003,41.99899999836087 12.99999999981001,41.99899999836087 12.99999999981001,41.99899999836087 C13.35199999981001,41.99899999836087 13.685999999810111,42.070999998360875 13.99999999981001,42.18299999836087 C13.99999999981001,42.18299999836087 13.99999999981001,30.998999998360873 13.99999999981001,30.998999998360873 C13.99999999981001,29.344999998360873 15.34599999981001,27.999999998360874 16.99999999981001,27.999999998360874 C16.99999999981001,27.999999998360874 26.99899999981001,27.999999998360874 26.99899999981001,27.999999998360874 C27.35099999981001,27.999999998360874 27.68499999981001,28.071999998360873 27.99899999981001,28.18399999836087 C27.99899999981001,28.18399999836087 27.99899999981001,16.999999998360874 27.99899999981001,16.999999998360874 C27.99899999981001,15.345999998360872 29.34499999981001,13.999999998360872 30.99899999981001,13.999999998360872 C30.99899999981001,13.999999998360872 40.99899999981001,13.999999998360872 40.99899999981001,13.999999998360872 C41.35099999981001,13.999999998360872 41.68399999981001,14.071999998360873 41.99899999981001,14.183999998360873 C41.99899999981001,14.183999998360873 41.99899999981001,2.9999999983608623 41.99899999981001,2.9999999983608623 C41.99899999981001,1.3459999983608624 43.34399999981001,-1.6391377283264674e-9 44.99899999981001,-1.6391377283264674e-9 C44.99899999981001,-1.6391377283264674e-9 54.99799999981001,-1.6391377283264674e-9 54.99799999981001,-1.6391377283264674e-9 C56.652999999810014,-1.6391377283264674e-9 57.99799999981001,1.3459999983608624 57.99799999981001,2.9999999983608623 C57.99799999981001,2.9999999983608623 57.99799999981001,54.99899999836087 57.99799999981001,54.99899999836087 C57.99799999981001,55.55099999836087 57.54999999981001,55.99899999836087 56.99799999981001,55.99899999836087 zM13.99999999981001,44.99899999836087 C13.99999999981001,44.44799999836087 13.55099999980991,43.99899999836087 12.99999999981001,43.99899999836087 C12.99999999981001,43.99899999836087 2.99999999981003,43.99899999836087 2.99999999981003,43.99899999836087 C2.4489999998099803,43.99899999836087 1.9999999998100302,44.44799999836087 1.9999999998100302,44.99899999836087 C1.9999999998100302,44.99899999836087 1.9999999998100302,53.99899999836087 1.9999999998100302,53.99899999836087 C1.9999999998100302,53.99899999836087 13.99999999981001,53.99899999836087 13.99999999981001,53.99899999836087 C13.99999999981001,53.99899999836087 13.99999999981001,44.99899999836087 13.99999999981001,44.99899999836087 zM27.99899999981001,30.998999998360873 C27.99899999981001,30.44799999836087 27.55099999980991,29.998999998360873 26.99899999981001,29.998999998360873 C26.99899999981001,29.998999998360873 16.99999999981001,29.998999998360873 16.99999999981001,29.998999998360873 C16.44899999981001,29.998999998360873 15.999999999810012,30.44799999836087 15.999999999810012,30.998999998360873 C15.999999999810012,30.998999998360873 15.999999999810012,44.99899999836087 15.999999999810012,44.99899999836087 C15.999999999810012,44.99899999836087 15.999999999810012,53.99899999836087 15.999999999810012,53.99899999836087 C15.999999999810012,53.99899999836087 27.99899999981001,53.99899999836087 27.99899999981001,53.99899999836087 C27.99899999981001,53.99899999836087 27.99899999981001,30.998999998360873 27.99899999981001,30.998999998360873 zM41.99899999981001,16.999999998360874 C41.99899999981001,16.44799999836087 41.54999999981001,15.999999998360874 40.99899999981001,15.999999998360874 C40.99899999981001,15.999999998360874 30.99899999981001,15.999999998360874 30.99899999981001,15.999999998360874 C30.447999999810012,15.999999998360874 29.99899999981001,16.44799999836087 29.99899999981001,16.999999998360874 C29.99899999981001,16.999999998360874 29.99899999981001,30.998999998360873 29.99899999981001,30.998999998360873 C29.99899999981001,30.998999998360873 29.99899999981001,53.99899999836087 29.99899999981001,53.99899999836087 C29.99899999981001,53.99899999836087 41.99899999981001,53.99899999836087 41.99899999981001,53.99899999836087 C41.99899999981001,53.99899999836087 41.99899999981001,16.999999998360874 41.99899999981001,16.999999998360874 zM55.99799999981001,2.9999999983608623 C55.99799999981001,2.4489999983608723 55.54999999981001,1.9999999983608623 54.99799999981001,1.9999999983608623 C54.99799999981001,1.9999999983608623 44.99899999981001,1.9999999983608623 44.99899999981001,1.9999999983608623 C44.44699999981001,1.9999999983608623 43.99899999981001,2.4489999983608723 43.99899999981001,2.9999999983608623 C43.99899999981001,2.9999999983608623 43.99899999981001,16.999999998360874 43.99899999981001,16.999999998360874 C43.99899999981001,16.999999998360874 43.99899999981001,53.99899999836087 43.99899999981001,53.99899999836087 C43.99899999981001,53.99899999836087 55.99799999981001,53.99899999836087 55.99799999981001,53.99899999836087 C55.99799999981001,53.99899999836087 55.99799999981001,2.9999999983608623 55.99799999981001,2.9999999983608623 zM23.99899999981001,2.9999999983608623 C23.99899999981001,2.9999999983608623 23.99899999981001,12.999999998360872 23.99899999981001,12.999999998360872 C23.99899999981001,13.551999998360872 23.55199999981001,13.999999998360872 22.99999999981001,13.999999998360872 C22.44699999981001,13.999999998360872 21.99999999981001,13.551999998360872 21.99999999981001,12.999999998360872 C21.99999999981001,12.999999998360872 21.99999999981001,5.413999998360852 21.99999999981001,5.413999998360852 C21.99999999981001,5.413999998360852 7.70699999981002,19.70699999836087 7.70699999981002,19.70699999836087 C7.51199999980997,19.90199999836087 7.25599999981,19.999999998360874 6.99999999981003,19.999999998360874 C6.74399999981006,19.999999998360874 6.48799999980997,19.90199999836087 6.29299999981004,19.70699999836087 C5.90299999981005,19.315999998360873 5.90299999981005,18.682999998360874 6.29299999981004,18.292999998360873 C6.29299999981004,18.292999998360873 20.58599999981001,3.9999999983608623 20.58599999981001,3.9999999983608623 C20.58599999981001,3.9999999983608623 12.99999999981001,3.9999999983608623 12.99999999981001,3.9999999983608623 C12.44799999981001,3.9999999983608623 11.99999999981001,3.5519999983608823 11.99999999981001,2.9999999983608623 C11.99999999981001,2.447999998360902 12.44799999981001,1.9999999983608623 12.99999999981001,1.9999999983608623 C12.99999999981001,1.9999999983608623 22.99899999981001,1.9999999983608623 22.99899999981001,1.9999999983608623 C23.12899999981001,1.9999999983608623 23.258999999810012,2.026999998360852 23.38199999981001,2.0769999983608622 C23.62599999981001,2.1789999983608923 23.82099999981001,2.3739999983608824 23.92199999981001,2.6179999983608626 C23.97299999981001,2.7399999983608723 23.99899999981001,2.869999998360872 23.99899999981001,2.9999999983608623 z" id="svg_1" class=""/>
                        </g>
                    </svg>
                </div>
                <div class="page-title title-text">ANALYTICS</div>
            </div>
            <div class="title-hr"></div>
        </div>

        <div class="tabs-container">
            <nav class="tabs">
                <div class="selector"></div>
                <a href="#" class="active" id="{{ iframe_mapper['entries']['url'] }}">Entries</a>
                <a href="#" id="{{ iframe_mapper['treatments']['url'] }}">Treatments</a>
                <a href="#" id="{{ iframe_mapper['demographics']['url'] }}">Demographics</a>
            </nav>
        </div>

    </div>

    <div class="dashboard-section {{ dashboard }}" onload="resizeIframe(this)">

        <iframe frameborder="0" src="{{ iframe_mapper['entries']['url'] }}" allowtransparency="true">

        </iframe>

    </div>

</div>

<script>

    var tabs = $('.tabs');
    var selector = $('.tabs').find('a').length;
    //var selector = $(".tabs").find(".selector");
    var activeItem = tabs.find('.active');
    var activeWidth = activeItem.innerWidth();
    $(".selector").css({
      "left": activeItem.position.left + "px",
      "width": activeWidth + "px"
    });

    $(".tabs").on("click","a",function(e){

        e.preventDefault();
        $('.tabs a').removeClass("active");
        $(this).addClass('active');

        var activeWidth = $(this).innerWidth();
        var itemPos = $(this).position();

        $(".selector").css({
        "left":itemPos.left + "px",
        "width": activeWidth + "px"
        });
    });

    $('.tabs a').on('click', function () {

        $('.dashboard-section').fadeOut('slow');
        $('iframe').attr('src', $(this).attr('id'));
        loadIframe();

    });

</script>
<script>

    function loadIframe () {

        Swal.fire({
          showConfirmButton: false,
          timer: 5000,
          showLoaderOnConfirm: true,
          preConfirm: true,
          target: document.getElementById('dash-cvr')
        });
        Swal.showLoading();
        $('.swal2-loading button').css('height', '6em');
        $('.swal2-loading button').css('width', '6em');

        setTimeout( function () {

            $('.dashboard-section').css('display', 'none');
            $('.dashboard-section').css('z-index', '9999');
            $('.dashboard-section').fadeIn('slow');

        }, 5000);
        iFrameResize({ log: false }, 'iframe');
    };

    $(document).ready( function () {

        loadIframe();

    });
</script>
<style>
    .swal2-modal{
        position: absolute!important;
        top: 20%;
        width: 20%;
        background-color: rgba(15, 17, 22, 0.5);
    }
    .swal2-container.swal2-shown {
        background-color: transparent;
        }
</style>
<script>

    $(document).ready( function () {

        $('.message-box .title-text').fitText(1.5);
        $('.tabs a').fitText(1.0);

    });

</script>


{% endblock content %}
